# Active Intents Specification
# 
# This file defines the business requirements and features currently being worked on.
# Each intent represents a formalized specification with scope, constraints, and acceptance criteria.
#
# The AI agent MUST select an active intent before modifying files using the select_active_intent tool.
# This ensures proper context loading, scope validation, and traceability.

active_intents:
  - id: "INT-001"
    name: "Intent-Code Traceability Hook System"
    status: "IN_PROGRESS"
    version: 2
    owned_scope:
      - "src/core/hooks/**"
      - "src/core/tools/SelectActiveIntentTool.ts"
      - "src/core/prompts/tools/native-tools/select_active_intent.ts"
      - ".orchestration/**"
      - ".specify/**"
    constraints:
      - "Must not break existing tool execution flow"
      - "Must be backward compatible with existing tasks"
      - "Must use optimistic locking for concurrency control"
      - "Must implement spatial independence via content hashing"
    acceptance_criteria:
      - "Hook engine intercepts all write tool executions"
      - "Agent can select active intent via select_active_intent tool"
      - "File modifications are logged to agent_trace.jsonl"
      - "Scope validation prevents out-of-scope modifications"
      - "Parallel agent sessions can work without conflicts"
      - "Intent lifecycle transitions are validated and enforced"
      - "Spatial map is auto-updated on successful mutations"
    related_specs:
      - type: "speckit"
        ref: ".specify/specs/hook-system.spec.md"
      - type: "speckit"
        ref: ".specify/specs/intent-formalization.md"
      - type: "constitution"
        ref: ".specify/memory/constitution.md"
    parent_intent: null
    tags:
      - "governance"
      - "core-infrastructure"
    created_at: "2026-02-18T10:00:00Z"
    updated_at: "2026-02-20T14:00:00Z"

  - id: "INT-002"
    name: "Example Feature - Weather API"
    status: "PENDING"
    version: 1
    owned_scope:
      - "src/api/weather/**"
      - "src/services/weather/**"
      - "tests/weather/**"
    constraints:
      - "Must use OpenWeatherMap API"
      - "Must cache responses for 5 minutes"
      - "Must handle rate limiting gracefully"
    acceptance_criteria:
      - "Can fetch current weather by city name"
      - "Can fetch 5-day forecast"
      - "Unit tests achieve 90% coverage"
      - "API errors are properly handled and logged"
    related_specs: []
    parent_intent: null
    tags:
      - "feature"
      - "api-integration"
    created_at: "2026-02-18T09:00:00Z"
    updated_at: "2026-02-18T09:00:00Z"
